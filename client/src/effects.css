/* Heavy visual effects - lazy loaded for performance */

/* Noise overlay - animated grain texture (scoped to hero) */
.noise-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 5;
  opacity: 0.03;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
  animation: noise 0.2s steps(2) infinite;
}

@keyframes noise {
  0%, 100% { transform: translate(0, 0); }
  10% { transform: translate(-2%, -2%); }
  20% { transform: translate(2%, -2%); }
  30% { transform: translate(-2%, 2%); }
  40% { transform: translate(2%, 2%); }
  50% { transform: translate(-2%, 0); }
  60% { transform: translate(2%, 0); }
  70% { transform: translate(0, -2%); }
  80% { transform: translate(0, 2%); }
  90% { transform: translate(-2%, -2%); }
}

/* Vertical lines background (scoped to hero) */
.vertical-lines {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 0;
  opacity: 0.7;
  background-image: repeating-linear-gradient(
    90deg,
    transparent,
    transparent 79px,
    hsl(var(--border) / 0.15) 79px,
    hsl(var(--border) / 0.15) 80px
  );
}

/* Scanlines overlay */
.scanlines {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 1;
  background-image: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    hsl(var(--foreground) / 0.02) 2px,
    hsl(var(--foreground) / 0.02) 4px
  );
  animation: scanline 6s linear infinite;
}

@keyframes scanline {
  0% { transform: translateY(0); }
  100% { transform: translateY(10px); }
}

/* Matrix circle with binary code */
.matrix-circle {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: min(90vw, 800px);
  height: min(90vw, 800px);
  border-radius: 50%;
  opacity: 0.08;
  z-index: 0;
  background-image: radial-gradient(
    circle,
    transparent 30%,
    hsl(var(--primary) / 0.1) 30%,
    hsl(var(--primary) / 0.1) 31%,
    transparent 31%
  );
  pointer-events: none;
}

.hero .matrix-circle::before {
  content: "01001001 01001110 01010100 01000101 01010010 01001110 01000001 01001100 00100000 01000101 01010010 01010010 01001111 01010010 00100000 01000011 01001111 01000100 01000101 00100000 00110100 00110000 00110100 00100000 01001110 01001111 01010100 00100000 01000110 01001111 01010101 01001110 01000100";
  position: absolute;
  inset: 0;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 70%;
  height: 70%;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  font-family: var(--font-mono);
  font-size: clamp(8px, 1vw, 12px);
  line-height: 1.8;
  word-wrap: break-word;
  pointer-events: none;
  z-index: -1;
  overflow: hidden;
  overflow-wrap: break-word;
  color: hsl(var(--primary) / 0.3);
  opacity: 0.5;
}

/* Glitch text effect with chromatic aberration */
.glitch-text {
  position: relative;
  display: inline-block;
  animation: glitch-skew 3s infinite;
}

.glitch-text::before,
.glitch-text::after {
  content: attr(data-glitch);
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  opacity: 0.8;
}

.glitch-text::before {
  color: hsl(195 100% 55%);
  z-index: -1;
  animation: glitch-before 3s infinite;
}

.glitch-text::after {
  color: hsl(310 100% 60%);
  z-index: -2;
  animation: glitch-after 3s infinite;
}

@keyframes glitch-skew {
  0%, 100% { transform: skew(0deg); }
  20% { transform: skew(0deg); }
  22% { transform: skew(-2deg); }
  24% { transform: skew(0deg); }
}

@keyframes glitch-before {
  0%, 100% { 
    clip-path: inset(0 0 0 0);
    transform: translate(0, 0);
  }
  20% {
    clip-path: inset(32% 0 28% 0);
    transform: translate(-3px, 2px);
  }
  22% {
    clip-path: inset(56% 0 12% 0);
    transform: translate(3px, -2px);
  }
  24% {
    clip-path: inset(0 0 0 0);
    transform: translate(0, 0);
  }
}

@keyframes glitch-after {
  0%, 100% { 
    clip-path: inset(0 0 0 0);
    transform: translate(0, 0);
  }
  20% {
    clip-path: inset(12% 0 48% 0);
    transform: translate(3px, -2px);
  }
  22% {
    clip-path: inset(20% 0 32% 0);
    transform: translate(-3px, 2px);
  }
  24% {
    clip-path: inset(0 0 0 0);
    transform: translate(0, 0);
  }
}

/* Service card glitch line effect */
.service-card {
  position: relative;
}

.glitch-line {
  position: absolute;
  top: 50%;
  left: 0;
  width: 100%;
  height: 2px;
  background: linear-gradient(
    90deg,
    transparent,
    hsl(195 100% 55% / 0.8),
    hsl(310 100% 60% / 0.8),
    transparent
  );
  opacity: 0;
  transform: translateY(-50%);
  transition: opacity 0.3s ease;
}

.service-card:hover .glitch-line {
  opacity: 1;
  animation: glitch-line-sweep 0.6s ease-in-out;
}

@keyframes glitch-line-sweep {
  0% {
    transform: translateX(-100%) translateY(-50%);
    opacity: 0;
  }
  50% {
    opacity: 1;
  }
  100% {
    transform: translateX(100%) translateY(-50%);
    opacity: 0;
  }
}

/* Responsive adjustments for mobile glitch effects */
@media (max-width: 768px) {
  .glitch-text::before,
  .glitch-text::after {
    opacity: 0.5;
  }

  .matrix-circle {
    opacity: 0.04;
  }

  .noise-overlay {
    opacity: 0.015;
    animation: none;
  }

  .vertical-lines {
    opacity: 0.4;
  }

  .scanlines {
    opacity: 0.5;
    animation-duration: 10s;
  }

  @keyframes glitch-skew {
    0%, 100% { transform: skew(0deg); }
  }

  @keyframes glitch-before {
    0%, 100% { 
      clip-path: inset(0 0 0 0);
      transform: translate(0, 0);
    }
  }

  @keyframes glitch-after {
    0%, 100% { 
      clip-path: inset(0 0 0 0);
      transform: translate(0, 0);
    }
  }
}
